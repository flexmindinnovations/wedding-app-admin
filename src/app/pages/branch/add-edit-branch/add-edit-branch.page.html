<div class="main ion-padding flex flex-col" *ngIf="isDataLoaded">
  <form [formGroup]="formGroup" class="flex-grow">
    <div class="flex flex-col-reverse items-start md:flex-row lg:flex-row flex-wrap">
      <div class="w-full md:w-1/2 lg:w-1/3 p-4 flex flex-col gap-3">
        <div class="flex flex-col gap-2">
          <label>Status</label>
          <div class="flex" role="group">
            <button type="button" (click)="toggleActive()"
              class="p-1 text-sm font-medium rounded-s-lg bg-gray-100 focus:z-10">
              <p class="p-1 min-w-16 rounded-md" [ngClass]="[isActive ? cssClass + ' shadow-lg' : '']">Active</p>
            </button>
            <button type="button" (click)="toggleActive()"
              class="p-1 text-sm font-medium  rounded-e-lg bg-gray-100 focus:z-10">
              <p class="p-1 min-w-16 rounded-md" [ngClass]="[!isActive ? cssClass + ' shadow-lg' : '']">Inactive</p>
            </button>
          </div>
        </div>

        <app-input label="Name" type="text" class="" [control]="formGroupControl['branchName']"
          formControlName="branchName" [required]="true" />

        @if (countryList?.length) {
        <app-dropdown label="Country" (onSelectionChange)="onSelectionChange($event, 'countryId')" class=""
          [control]="formGroupControl['countryId']" [controlValue]="formGroup.get('countryId')?.value"
          formControlName="countryId" [options]="countryList" />
        }

        @if (stateList?.length) {
        <app-dropdown label="State" (onSelectionChange)="onSelectionChange($event, 'stateId')" class=""
          [control]="formGroupControl['stateId']" [controlValue]="formGroup.get('stateId')?.value"
          formControlName="stateId" [options]="stateList" />
        }

        @if (cityList?.length) {
        <app-dropdown label="City" (onSelectionChange)="onSelectionChange($event, 'cityId')" class=""
          [control]="formGroupControl['cityId']" [controlValue]="formGroup.get('cityId')?.value"
          formControlName="cityId" [options]="cityList" />
        }
        <!-- <app-input label="Order" type="text" class="" [control]="formGroupControl['order']" formControlName="order"
          [required]="true" /> -->
      </div>
      <div class="w-full md:w-1/2 xl:w-1/2 p-4 flex justify-center lg:my-5 items-center">
        <image-picker label="Add Image" [id]="branchId" [fileName]="imageName" [src]="imagePath"
          (selectedImage)="handleSelectedImage($event)" />
      </div>
    </div>
  </form>

  <div class="action-buttons flex items-center px-3 py-2 justify-end">
    <mt-button [disabled]="formGroup.invalid" [title]="branchId > 0 ? 'Update Branch' : 'Save Branch'"
      [icon]="'arrow-forward'" [iconSlot]="'end'" (action)="handleSubmitClick()" />
  </div>
</div>